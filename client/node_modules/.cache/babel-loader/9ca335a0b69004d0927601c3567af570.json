{"ast":null,"code":"var _jsxFileName = \"/home/user/Desktop/Final-Project/Final_Project/client/src/components/authentication/Profile.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport MyContext from \"../../context/MyContext\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Profile = () => {\n  _s();\n\n  const context = useContext(MyContext);\n  const {\n    email,\n    setEmail,\n    pass,\n    setPass,\n    name,\n    setName,\n    avatarFile,\n    setAvatarFile,\n    birthDate,\n    setBirthDate,\n    isProfileSaved,\n    setIsProfileSaved,\n    loginMsg,\n    setLoginMsg\n  } = context;\n  useEffect(() => {\n    if (!localStorage.getItem(\"token\")) {\n      setLoginMsg( /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"fullScreenText\",\n        children: [\"You should \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/form\",\n          children: \"login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 22\n        }, this), \" to see your profile!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this));\n    } else {\n      fetch(\"http://localhost:8080/profile/get\", {\n        method: \"GET\",\n        headers: {\n          \"x-auth-token\": localStorage.getItem(\"token\")\n        }\n      }).then(response => response.json()).then(result => {\n        console.log(123, result);\n        setName(result.data.name);\n        setBirthDate(result.data.birthDate);\n      });\n    }\n  }, [isProfileSaved]);\n\n  const inputHandler = e => {\n    //console.log(e);\n    switch (e.target.name) {\n      case \"name\":\n        setName(e.target.value);\n        break;\n\n      case \"birthDate\":\n        setBirthDate(e.target.value);\n        break;\n\n      default:\n        console.error(`There's a problem. Please check the event listener.`);\n        break;\n    }\n  };\n\n  console.log(name);\n  console.log(birthDate);\n\n  const saveHandler = () => {\n    // const formData = new FormData();\n    // //formData.append(\"avatarFile\", avatarFile);\n    // formData.append(\"name\", name);\n    // formData.append(\"birthDate\", birthDate);\n    // console.log(formData);\n    const url = \"http://localhost:8080/profile/save\";\n    const options = {\n      // method: \"POST\",\n      // headers: {\n      //   \"x-auth-token\": localStorage.getItem(\"token\"),\n      // },\n      // body: formData,\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-auth-token\": localStorage.getItem(\"token\")\n      },\n      body: JSON.stringify({\n        name,\n        birthDate\n      })\n    };\n    fetch(url, options).then(response => response.text()).then(result => {\n      setIsProfileSaved(true);\n      alert(result);\n    });\n  }; //   const fileHandler = (e) => {\n  //     setAvatarFile(e.target.files[0]);\n  //   };\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: loginMsg !== \"\" ? loginMsg : /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"Name\",\n        value: name,\n        onChange: inputHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"birthDate\",\n        placeholder: \"Birth date\",\n        value: birthDate,\n        onChange: inputHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: saveHandler,\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Profile, \"wqnYpdjMkT3eDhbBjwDmfBO/TFg=\");\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["useState","useEffect","useContext","useNavigate","MyContext","Link","Profile","context","email","setEmail","pass","setPass","name","setName","avatarFile","setAvatarFile","birthDate","setBirthDate","isProfileSaved","setIsProfileSaved","loginMsg","setLoginMsg","localStorage","getItem","fetch","method","headers","then","response","json","result","console","log","data","inputHandler","e","target","value","error","saveHandler","url","options","body","JSON","stringify","text","alert"],"sources":["/home/user/Desktop/Final-Project/Final_Project/client/src/components/authentication/Profile.jsx"],"sourcesContent":["import { useState, useEffect, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport MyContext from \"../../context/MyContext\";\nimport { Link } from \"react-router-dom\";\n\nconst Profile = () => {\n  const context = useContext(MyContext);\n  const {\n    email,\n    setEmail,\n    pass,\n    setPass,\n    name,\n    setName,\n    avatarFile,\n    setAvatarFile,\n    birthDate,\n    setBirthDate,\n    isProfileSaved,\n    setIsProfileSaved,\n    loginMsg,\n    setLoginMsg,\n  } = context;\n\n  useEffect(() => {\n    if (!localStorage.getItem(\"token\")) {\n      setLoginMsg(\n        <p className=\"fullScreenText\">\n          You should <Link to={\"/form\"}>login</Link> to see your profile!\n        </p>\n      );\n    } else {\n      fetch(\"http://localhost:8080/profile/get\", {\n        method: \"GET\",\n        headers: {\n          \"x-auth-token\": localStorage.getItem(\"token\"),\n        },\n      })\n        .then((response) => response.json())\n        .then((result) => {\n          console.log(123, result);\n\n          setName(result.data.name);\n          setBirthDate(result.data.birthDate);\n        });\n    }\n  }, [isProfileSaved]);\n\n  const inputHandler = (e) => {\n    //console.log(e);\n    switch (e.target.name) {\n      case \"name\":\n        setName(e.target.value);\n        break;\n\n      case \"birthDate\":\n        setBirthDate(e.target.value);\n        break;\n\n      default:\n        console.error(`There's a problem. Please check the event listener.`);\n        break;\n    }\n  };\n  console.log(name);\n  console.log(birthDate);\n\n  const saveHandler = () => {\n    // const formData = new FormData();\n    // //formData.append(\"avatarFile\", avatarFile);\n    // formData.append(\"name\", name);\n    // formData.append(\"birthDate\", birthDate);\n\n    // console.log(formData);\n\n    const url = \"http://localhost:8080/profile/save\";\n    const options = {\n      // method: \"POST\",\n      // headers: {\n      //   \"x-auth-token\": localStorage.getItem(\"token\"),\n      // },\n      // body: formData,\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-auth-token\": localStorage.getItem(\"token\"),\n      },\n      body: JSON.stringify({ name, birthDate }),\n    };\n\n    fetch(url, options)\n      .then((response) => response.text())\n      .then((result) => {\n        setIsProfileSaved(true);\n        alert(result);\n      });\n  };\n\n  //   const fileHandler = (e) => {\n  //     setAvatarFile(e.target.files[0]);\n  //   };\n\n  return (\n    <div>\n      {loginMsg !== \"\" ? (\n        loginMsg\n      ) : (\n        <section className=\"flex-col\">\n          <h1>Profile</h1>\n          {/* <img className = 'avatar' src={avatarUrl} /> */}\n          {/* <input id=\"uploader\" type=\"file\" onChange={fileHandler} /> */}\n          <input\n            type=\"text\"\n            name=\"name\"\n            placeholder=\"Name\"\n            value={name}\n            onChange={inputHandler}\n          />\n          <input\n            type=\"text\"\n            name=\"birthDate\"\n            placeholder=\"Birth date\"\n            value={birthDate}\n            onChange={inputHandler}\n          />\n\n          <button onClick={saveHandler}>Save</button>\n        </section>\n      )}\n    </div>\n  );\n};\n\nexport default Profile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}